
@using Suhoh.Model
@model ViewModel

@Html.DevExpress().TreeView(
    settings => {
        settings.Name = "callbackTvMapServices";

        // Events gets fired on client side (not server side)
        settings.EnableClientSideAPI = true;    
        settings.ClientSideEvents.Init = "mapServiceTVInit";
        settings.ClientSideEvents.NodeClick = "mapServiceTVNodeClick";
        settings.ClientSideEvents.ExpandedChanged = "mapServiceTVExpandedChanged";
        settings.ClientSideEvents.CheckedChanged = "mapServiceTVCheckedChanged";

        settings.ControlStyle.CssClass = "layerListTV";
        settings.EnableNodeTextWrapping = true;

        settings.AllowCheckNodes = true;
        settings.AllowSelectNode = true;
        settings.CheckNodesRecursive = true;
        settings.EnableAnimation = true;
        settings.EnableHotTrack = true;
        //settings.ShowTreeLines = true;    // Do not support by design
        settings.ShowExpandButtons = true;

        foreach (var m in Model.AppConfig.MapServices)
        {
            settings.Nodes.Add(node =>
            {
                node.Name = m.Id;
                node.Text = m.Id;
                node.Checked = true;
                if (!m.IsVisible)
                    node.Checked = false;
            });
        }

        settings.Nodes.Add(node => {
            node.Text = "Home";
            node.Nodes.Add(subNode => {
                subNode.Text = "News";
                subNode.Nodes.Add("For Developers");
                subNode.Nodes.Add("Website news");
            });
            node.Nodes.Add("Our Mission");
            node.Nodes.Add("Our Customers");
        });

        //settings.PreRender = (source, e) => {
        //    ASPxTreeView treeView = (ASPxTreeView)source;
        //    treeView.ExpandToDepth(0);
        //};
    }).GetHtml()