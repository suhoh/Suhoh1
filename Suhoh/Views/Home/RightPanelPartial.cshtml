@using Suhoh.Model
@model ViewModel

@*@Html.Raw(File.ReadAllText(Server.MapPath(@"~/App_Data/Overview.html")))*@

@Html.DevExpress().Panel(pSettings =>
{
    pSettings.Name = "mainPanel";
    //pSettings.FixedPosition = PanelFixedPosition.WindowRight;
    pSettings.Collapsible = false;
    //pSettings.SettingsAdaptivity.CollapseAtWindowInnerWidth = 960;
    pSettings.Width = Unit.Percentage(100);
    pSettings.SetContent(() =>
    {
        @Html.DevExpress().Splitter(settings =>
        {
            settings.Name = "splitterMain";
            settings.ShowCollapseBackwardButton = true;
            settings.ShowCollapseForwardButton = true;
            settings.ShowSeparatorImage = true;
            settings.Orientation = Orientation.Vertical;
            settings.AllowResize = true;
            settings.SeparatorVisible = true;
            settings.FullscreenMode = true;

            //settings.ControlStyle.CssClass = "rightPanelPartial";

            //foreach(var p in Model.MainPanels)
            //{
            //    settings.Panes.Add(pane =>
            //    {
            //        pane.Name = p.Name;
            //        pane.SetContent(() =>
            //        {
            //            ViewContext.Writer.Write("<h1>" + p.Name + "</h1>");
            //        });
            //    });
            //};

            settings.Panes.Add(panes =>
            {
                panes.Panes.Add(mapPane =>
                {
                    mapPane.Name = "paneMap";
                    mapPane.SetContent(() =>
                    {
                        Html.RenderPartial("OpenLayerMap", Model);
                    });

                });
                panes.Panes.Add(graphPane =>
                {
                    graphPane.Name = "paneGraph";
                    graphPane.SetContent(() =>
                    {
                        Html.RenderPartial("D3Graph", Model);
                    });
                });
            });
            settings.Panes.Add(gridviewPaneMain =>
            {
                gridviewPaneMain.Size = Unit.Percentage(35);
                gridviewPaneMain.Panes.Add(gridviewPane =>
                {
                    gridviewPane.Name = "paneGridview";
                    gridviewPane.SetContent(() =>
                    {         // can't add extra div as part of Gridview. Had to add here
                        ViewContext.Writer.Write("<div class='divGridviewMaximize'>");
                        ViewContext.Writer.Write("<button id='btnGridviewMaximize' type='button' class='btnGridviewMaximize' title='Maximize'></button>");
                        ViewContext.Writer.Write("</div>");
                        ViewContext.Writer.Write("<div class='divGridviewLegend'>");
                        ViewContext.Writer.Write("<button id='btnGridviewLegend' type='button' class='btnGridviewLegend' title='Legend' onclick=''></button>");
                        ViewContext.Writer.Write("</div>");
                        ViewContext.Writer.Write("<div class='divGridviewProperty'>");
                        ViewContext.Writer.Write("<button id='btnGridviewProperty' type='button' class='btnGridviewProperty' title='Property' onclick='addNewPane(\"gridview\")'></button>");
                        ViewContext.Writer.Write("</div>");
                        ViewContext.Writer.Write("<div class='divGridviewSetting'>");
                        ViewContext.Writer.Write("<button id='btnGridviewClose' type='button' class='btnGridviewClose' title='Close'></button>");
                        ViewContext.Writer.Write("</div>");
                        Html.RenderAction("DxGridview", Model);
                    });
                });
                if ((bool)ViewData["RightPanelPartialCallback"])
                {
                    ViewData["RightPanelPartialCallback"] = false;
                    gridviewPaneMain.Panes.Add(gridviewPane2 =>
                    {
                        gridviewPane2.Name = "paneGridview2";
                        //gridviewPane2.Size = Unit.Percentage(35);
                        gridviewPane2.SetContent(() =>
                        {
                            ViewContext.Writer.Write("<div class='divGridviewMaximize'>");
                            ViewContext.Writer.Write("<button id='btnGridviewMaximize' type='button' class='btnGridviewMaximize' title='Maximize'></button>");
                            ViewContext.Writer.Write("</div>");
                            ViewContext.Writer.Write("<div class='divGridviewLegend'>");
                            ViewContext.Writer.Write("<button id='btnGridviewLegend' type='button' class='btnGridviewLegend' title='Legend' onclick=''></button>");
                            ViewContext.Writer.Write("</div>");
                            ViewContext.Writer.Write("<div class='divGridviewProperty'>");
                            ViewContext.Writer.Write("<button id='btnGridviewProperty' type='button' class='btnGridviewProperty' title='Property' onclick='addNewPane(\"gridview\")'></button>");
                            ViewContext.Writer.Write("</div>");
                            ViewContext.Writer.Write("<div class='divGridviewSetting'>");
                            ViewContext.Writer.Write("<button id='btnGridviewClose' type='button' class='btnGridviewClose' title='Close'></button>");
                            ViewContext.Writer.Write("</div>");
                        });
                    });
                }
            });

            settings.ClientSideEvents.PaneResized = "splitterMainResized";
        }).GetHtml();
    });
}).GetHtml()

