@using Suhoh.Model
@model ViewModel

@{
    ViewBag.Title = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section LeftPanelContent {
    @Html.Partial("LeftPanelPartial")
}

<script>
    var _headerHeight = 0;

    window.addEventListener('resize', function (event) {
        console.log("window - innerWidth " + window.innerWidth);
        console.log("window - innerHeight " + window.innerHeight);
    })

    function splitterMainResized(s, e) {
        _map.updateSize();
        var pGridview = splitterMain.GetPaneByName('paneGridview');
        dxGridview.SetHeight(pGridview.GetClientHeight() - _headerHeight);
    }

</script>

<div style="width:100%;height:100%;position: relative;" id="MainContent">
    @*@Html.Raw(File.ReadAllText(Server.MapPath(@"~/App_Data/Overview.html")))*@

    @Html.DevExpress().Splitter(settings => {
        settings.Name = "splitterMain";
        //settings.Height = 800;  // no effect
        //settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);  // no effect
        settings.Orientation = Orientation.Vertical;
        settings.AllowResize = true;
        settings.SeparatorVisible = true;
        settings.FullscreenMode = true;
        settings.Panes.Add(panes => {
            panes.Panes.Add(mapPane =>
            {
                mapPane.Name = "paneMap";
                mapPane.SetContent(() =>
                {
                    Html.RenderPartial("OpenLayerMap", Model);
                });

            });
            panes.Panes.Add(graphPane =>
            {
                graphPane.Name = "paneGraph";
                graphPane.SetContent(() =>
                {
                    Html.RenderPartial("D3Graph", Model);
                });

            });
        });
        settings.Panes.Add(gridviewPane => {
            gridviewPane.Name = "paneGridview";
            gridviewPane.Size = Unit.Percentage(30);
            gridviewPane.SetContent(() => {
                Html.RenderAction("DxGridview", Model);
            });
        });
        settings.ClientSideEvents.PaneResized = "splitterMainResized";
    }).GetHtml()
</div>

@*<div id="PieChart" style="background: yellow; top: 500px; left: 500px; z-index: 1000"></div>*@